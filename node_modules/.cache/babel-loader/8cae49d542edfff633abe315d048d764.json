{"ast":null,"code":"import { walkcycle, rotate, walkcycleEnnemis } from './state';\nimport imageSol from './images/sol.png';\nimport imageCoeur from './images/coeur.png';\nimport imagePerso from './images/megaMan_static1.png';\nimport imagePersoD from './images/megaMan_static1_droite.png';\nimport fond1 from './images/background_1.png';\nimport fond2 from './images/background_2.png';\nimport fond3 from './images/background_3.png';\nimport fond4 from './images/background_4.png';\nimport marche1 from './images/megaMan_run1.png';\nimport marche2 from './images/megaMan_run2.png';\nimport marche3 from './images/megaMan_run3.png';\nimport marche4 from './images/megaMan_run4.png';\nimport marche1d from './images/megaMan_run1_droite.png';\nimport marche2d from './images/megaMan_run2_droite.png';\nimport marche3d from './images/megaMan_run3_droite.png';\nimport marche4d from './images/megaMan_run4_droite.png';\nimport ennemi1 from './images/enemy_boule/enemy_boule_3.png';\nimport ennemi2 from './images/enemy_boule/enemy_boule_4.png';\nimport ennemi3 from './images/enemy_boule/enemy_boule_5.png';\nimport ennemi1D from './images/enemy_boule/enemy_boule_3_droite.png';\nimport ennemi2D from './images/enemy_boule/enemy_boule_4_droite.png';\nimport ennemi3D from './images/enemy_boule/enemy_boule_5_droite.png';\nimport ennemiv1 from './images/ennemy_volant/ennemy_volant_1.png';\nimport ennemiv2 from './images/ennemy_volant/ennemy_volant_2.png';\nimport ennemiv3 from './images/ennemy_volant/ennemy_volant_3.png';\nimport balleImg from './images/oeuf.png';\nimport mort1 from './images/mort/mort_1.png';\nimport mort2 from './images/mort/mort_2.png';\nimport mort3 from './images/mort/mort_3.png';\nimport mort4 from './images/mort/mort_4.png';\nimport mort5 from './images/mort/mort_5.png';\nimport mort6 from './images/mort/mort_6.png';\nimport mort7 from './images/mort/mort_7.png';\nimport mort8 from './images/mort/mort_8.png';\nimport pf from './images/plateforme_city.png';\nimport imageMur from './images/mur.png';\nimport { ensEnnemis, ensPlat } from './index';\nvar COLORS = {\n  RED: '#ff0000',\n  GREEN: '#008800',\n  BLUE: '#0000ff'\n};\nvar oldrotate = false;\nvar frame = 0;\nexport var dimPersoX = 100;\nexport var dimPersoY = 100;\nvar stateImageSol = false;\nvar stateImageCoeur = false;\nvar stateImagePerso = false;\nvar stateFond = false;\nvar stateEnnemi = false;\nvar imageCoeurUrl = new Image();\nvar imageSolUrl = new Image();\nvar imagePersoUrl = new Image();\nvar imagePersoUrlD = new Image();\nvar imageFond1Url = new Image();\nvar imageFond2Url = new Image();\nvar imageFond3Url = new Image();\nvar imageFond4Url = new Image();\nvar imageMarche1Url = new Image();\nvar imageMarche2Url = new Image();\nvar imageMarche3Url = new Image();\nvar imageMarche4Url = new Image();\nvar imageMarche1DUrl = new Image();\nvar imageMarche2DUrl = new Image();\nvar imageMarche3DUrl = new Image();\nvar imageMarche4DUrl = new Image();\nvar imageEnnemi1Url = new Image();\nvar imageEnnemi2Url = new Image();\nvar imageEnnemi3Url = new Image();\nvar imageEnnemi1DUrl = new Image();\nvar imageEnnemi2DUrl = new Image();\nvar imageEnnemi3DUrl = new Image();\nvar ennemiV1Url = new Image();\nvar ennemiV2Url = new Image();\nvar ennemiV3Url = new Image();\nvar imageBalleUrl = new Image();\nvar mort1URL = new Image();\nvar mort2URL = new Image();\nvar mort3URL = new Image();\nvar mort4URL = new Image();\nvar mort5URL = new Image();\nvar mort6URL = new Image();\nvar mort7URL = new Image();\nvar mort8URL = new Image();\nvar imagePF = new Image();\nvar imageMurUrl = new Image();\nimagePF.src = pf;\nimageCoeurUrl.src = imageCoeur;\nimageSolUrl.src = imageSol;\nimagePersoUrl.src = imagePerso;\nimagePersoUrlD.src = imagePersoD;\nimageFond1Url.src = fond1;\nimageFond2Url.src = fond2;\nimageFond3Url.src = fond3;\nimageFond4Url.src = fond4;\nimageMarche1Url.src = marche1;\nimageMarche2Url.src = marche2;\nimageMarche3Url.src = marche3;\nimageMarche4Url.src = marche4;\nimageMarche1DUrl.src = marche1d;\nimageMarche2DUrl.src = marche2d;\nimageMarche3DUrl.src = marche3d;\nimageMarche4DUrl.src = marche4d;\nimageEnnemi1Url.src = ennemi1;\nimageEnnemi2Url.src = ennemi2;\nimageEnnemi3Url.src = ennemi3;\nimageEnnemi1DUrl.src = ennemi1D;\nimageEnnemi2DUrl.src = ennemi2D;\nimageEnnemi3DUrl.src = ennemi3D;\nennemiV1Url.src = ennemiv1;\nennemiV2Url.src = ennemiv2;\nennemiV3Url.src = ennemiv3;\nimageBalleUrl.src = balleImg;\nmort1URL.src = mort1;\nmort2URL.src = mort2;\nmort3URL.src = mort3;\nmort4URL.src = mort4;\nmort5URL.src = mort5;\nmort6URL.src = mort6;\nmort7URL.src = mort7;\nmort8URL.src = mort8;\nimageMurUrl.src = imageMur;\nimageSolUrl.onload = function () {\n  stateImageSol = true;\n};\nimageCoeurUrl.onload = function () {\n  stateImageCoeur = true;\n};\nimagePersoUrl.onload = function () {\n  stateImagePerso = true;\n};\nimageFond1Url.onload = function () {\n  stateFond = true;\n};\nimageEnnemi1Url.onload = function () {\n  stateEnnemi = true;\n};\nvar toDoubleHexa = function toDoubleHexa(n) {\n  return n < 16 ? '0' + n.toString(16) : n.toString(16);\n};\nexport var rgbaTorgb = function rgbaTorgb(rgb) {\n  var alpha = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var r = 0;\n  var g = 0;\n  var b = 0;\n  if (rgb.startsWith('#')) {\n    var hexR = rgb.length === 7 ? rgb.slice(1, 3) : rgb[1];\n    var hexG = rgb.length === 7 ? rgb.slice(3, 5) : rgb[2];\n    var hexB = rgb.length === 7 ? rgb.slice(5, 7) : rgb[3];\n    r = parseInt(hexR, 16);\n    g = parseInt(hexG, 16);\n    b = parseInt(hexB, 16);\n  }\n  if (rgb.startsWith('rgb')) {\n    var val = rgb.replace(/(rgb)|\\(|\\)| /g, '');\n    var splitted = val.split(',');\n    r = parseInt(splitted[0]);\n    g = parseInt(splitted[1]);\n    b = parseInt(splitted[2]);\n  }\n  r = Math.max(Math.min(Math.floor((1 - alpha) * r + alpha * 255), 255), 0);\n  g = Math.max(Math.min(Math.floor((1 - alpha) * g + alpha * 255), 255), 0);\n  b = Math.max(Math.min(Math.floor((1 - alpha) * b + alpha * 255), 255), 0);\n  return \"#\".concat(toDoubleHexa(r)).concat(toDoubleHexa(g)).concat(toDoubleHexa(b));\n};\nvar clear = function clear(ctx) {\n  var _ctx$canvas = ctx.canvas,\n    height = _ctx$canvas.height,\n    width = _ctx$canvas.width;\n  ctx.fillStyle = 'white';\n  ctx.fillRect(0, 0, width, height);\n};\n\n/*\nexport type RenderProps = {\n  pos: { x: number; y: number }\n  scale: number\n}\n\nconst drawCirle = (\n  ctx: CanvasRenderingContext2D,\n  renderProps: RenderProps,\n  { x, y }: { x: number; y: number },\n  color: string\n) => {\n  ctx.beginPath()\n  ctx.fillStyle = color\n  ctx.arc(\n    (x + renderProps.pos.x) * renderProps.scale,\n    (y + renderProps.pos.y) * renderProps.scale,\n    conf.RADIUS * renderProps.scale,\n    0,\n    2 * Math.PI\n  )\n  ctx.fill()\n}*/\n\nvar listMurs = [[0, -20, 100, 800], [2400, 385, 100, 300], [2400, 385, 100, 300], [3400, 385, 100, 300], [6000, -20, 100, 800]];\n\n//booleen pour verifier si l'on peut animer la mort d'un ennemi ou non\nvar canAnim = false;\n\n//compteur pour l'animation de mort\nvar cptMort = 0;\nvar animMort = function animMort(ctx, state, x, y) {\n  cptMort = (cptMort + 1) % 61;\n  if (cptMort < 7) ctx.drawImage(mort1URL, x, y, 80, 80);else if (cptMort >= 7 && cptMort < 15) ctx.drawImage(mort2URL, x, y, 80, 80);else if (cptMort >= 15 && cptMort < 22) ctx.drawImage(mort3URL, x, y, 80, 80);else if (cptMort >= 22 && cptMort < 30) ctx.drawImage(mort4URL, x, y, 80, 80);else if (cptMort >= 30 && cptMort < 37) ctx.drawImage(mort5URL, x, y, 80, 80);else if (cptMort >= 37 && cptMort < 45) ctx.drawImage(mort6URL, x, y, 80, 80);else if (cptMort >= 45 && cptMort < 52) ctx.drawImage(mort7URL, x, y, 80, 80);else if (cptMort >= 52 && cptMort < 60) ctx.drawImage(mort8URL, x, y, 80, 80);else {\n    canAnim = false;\n    cptMort = (cptMort + 1) % 61;\n  }\n};\nvar xMort = 0;\nvar yMort = 0;\nvar cptTmp = 0;\nvar cptTmpEnnemis = 0;\nvar displayImages = function displayImages(ctx) {\n  return function (state) {\n    //on déplace la caméra en prenant le joueur comme réferentiel\n    ctx.save();\n    ctx.translate(-(state.camera.x - ctx.canvas.width / 2), 0);\n\n    /*Il faut s'assurer que tous les éléments du fond (points de vie etc.. suivent la caméra)\n      Mais que tous les éléments fixes (plateformes/ennemis ne la suivent pas)\n    */\n    if (stateFond) {\n      if (frame < 5) ctx.drawImage(imageFond1Url, state.camera.x - ctx.canvas.width / 2, -200, 1400, 1000);else if (frame >= 5 && frame < 10) ctx.drawImage(imageFond2Url, state.camera.x - ctx.canvas.width / 2, -200, 1400, 1000);else if (frame >= 10 && frame < 15) ctx.drawImage(imageFond3Url, state.camera.x - ctx.canvas.width / 2, -200, 1400, 1000);else {\n        ctx.drawImage(imageFond4Url, state.camera.x - ctx.canvas.width / 2, -200, 1400, 1000);\n      }\n    }\n\n    //affichage du sol\n    for (var i = 0; i < 20; i++) {\n      ctx.drawImage(imageSolUrl, i * 495, 680, 500, 100);\n    }\n    for (var _i = 0; _i < ensPlat.length; _i++) {\n      ctx.drawImage(imagePF, ensPlat[_i].x, ensPlat[_i].y, ensPlat[_i].longueur, ensPlat[_i].largeur);\n      //ctx.fillStyle = 'red'\n      //ctx.fillRect(plats[i].x, plats[i].y, plats[i].longueur, plats[i].largeur)\n    }\n\n    //affichage des murs\n    for (var m = 0; m < listMurs.length; m++) {\n      ctx.drawImage(imageMurUrl, listMurs[m][0], listMurs[m][1], listMurs[m][2], listMurs[m][3]);\n    }\n    for (var _i2 = 0; _i2 < state.joueur.HP; _i2++) {\n      ctx.drawImage(imageCoeurUrl, state.camera.x - ctx.canvas.width / 2 + _i2 * 60, 10, 50, 50);\n    }\n    /*\n    if(stateImageCoeur){\n      ctx.drawImage(imageCoeurUrl,10+state.camera.x-ctx.canvas.width/2,10,50,50);\n      ctx.drawImage(imageCoeurUrl,70+state.camera.x-ctx.canvas.width/2,10,50,50);\n      ctx.drawImage(imageCoeurUrl,130+state.camera.x-ctx.canvas.width/2,10,50,50);\n    }*/\n\n    if (stateEnnemi) {\n      if (walkcycleEnnemis == true) {\n        cptTmpEnnemis = (cptTmpEnnemis + 1) % 60;\n        for (var _i3 = 0; _i3 < ensEnnemis.length; _i3++) {\n          if (ensEnnemis[_i3].rotate == true) {\n            if (cptTmpEnnemis < 15) {\n              if (ensEnnemis[_i3].type == 'boule') ctx.drawImage(imageEnnemi1DUrl, ensEnnemis[_i3].x, ensEnnemis[_i3].y, 80, 80);else ctx.drawImage(ennemiV1Url, ensEnnemis[_i3].x, ensEnnemis[_i3].y, 80, 80);\n            } else if (cptTmpEnnemis >= 15 && cptTmpEnnemis < 30) {\n              if (ensEnnemis[_i3].type == 'boule') ctx.drawImage(imageEnnemi2DUrl, ensEnnemis[_i3].x, ensEnnemis[_i3].y, 80, 80);else ctx.drawImage(ennemiV2Url, ensEnnemis[_i3].x, ensEnnemis[_i3].y, 80, 80);\n            } else if (cptTmpEnnemis >= 30 && cptTmpEnnemis < 45) {\n              if (ensEnnemis[_i3].type == 'boule') ctx.drawImage(imageEnnemi1DUrl, ensEnnemis[_i3].x, ensEnnemis[_i3].y, 80, 80);else ctx.drawImage(ennemiV1Url, ensEnnemis[_i3].x, ensEnnemis[_i3].y, 80, 80);\n            } else {\n              if (ensEnnemis[_i3].type == 'boule') ctx.drawImage(imageEnnemi3DUrl, ensEnnemis[_i3].x, ensEnnemis[_i3].y, 80, 80);else ctx.drawImage(ennemiV3Url, ensEnnemis[_i3].x, ensEnnemis[_i3].y, 80, 80);\n            }\n          } else {\n            if (cptTmpEnnemis < 15) {\n              if (ensEnnemis[_i3].type == 'boule') ctx.drawImage(imageEnnemi1Url, ensEnnemis[_i3].x, ensEnnemis[_i3].y, 80, 80);else ctx.drawImage(ennemiV1Url, ensEnnemis[_i3].x, ensEnnemis[_i3].y, 80, 80);\n            } else if (cptTmpEnnemis >= 15 && cptTmpEnnemis < 30) {\n              if (ensEnnemis[_i3].type == 'boule') ctx.drawImage(imageEnnemi2Url, ensEnnemis[_i3].x, ensEnnemis[_i3].y, 80, 80);else ctx.drawImage(ennemiV2Url, ensEnnemis[_i3].x, ensEnnemis[_i3].y, 80, 80);\n            } else if (cptTmpEnnemis >= 30 && cptTmpEnnemis < 45) {\n              if (ensEnnemis[_i3].type == 'boule') ctx.drawImage(imageEnnemi1Url, ensEnnemis[_i3].x, ensEnnemis[_i3].y, 80, 80);else ctx.drawImage(ennemiV1Url, ensEnnemis[_i3].x, ensEnnemis[_i3].y, 80, 80);\n            } else {\n              if (ensEnnemis[_i3].type == 'boule') ctx.drawImage(imageEnnemi3Url, ensEnnemis[_i3].x, ensEnnemis[_i3].y, 80, 80);else ctx.drawImage(ennemiV3Url, ensEnnemis[_i3].x, ensEnnemis[_i3].y, 80, 80);\n            }\n          }\n        }\n      }\n    }\n\n    //animation mort ennemis\n    for (var _i4 = 0; _i4 < state.ennemis.length; _i4++) {\n      if (state.ennemis[_i4].HP <= 0) {\n        xMort = state.ennemis[_i4].x;\n        yMort = state.ennemis[_i4].y;\n        state.ennemis.splice(_i4, 1);\n        canAnim = true;\n      }\n    }\n    if (canAnim) {\n      animMort(ctx, state, xMort, yMort);\n    }\n\n    /*\n    else{\n      if(rotateEnnemis==true){\n        cptTmpEnnemis= (cptTmpEnnemis+1)%60\n        if(cptTmpEnnemis<15)\n          for(let i = 0; i<ensEnnemis.length; i++){\n            ctx.drawImage(imageEnnemi1Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n          }\n        else if (cptTmpEnnemis>=15 && cptTmpEnnemis < 30)\n          for(let i = 0; i<ensEnnemis.length; i++){\n            ctx.drawImage(imageEnnemi1Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n          }\n        else if (cptTmp>=30 && cptTmp < 45)\n          for(let i = 0; i<ensEnnemis.length; i++){\n            ctx.drawImage(imageEnnemi1Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n          }\n        else{\n          for(let i = 0; i<ensEnnemis.length; i++){\n            ctx.drawImage(imageEnnemi1Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n          }\n        }\n      }\n      else{\n        cptTmpEnnemis= (cptTmpEnnemis+1)%60\n        if(cptTmpEnnemis<15)\n          for(let i = 0; i<ensEnnemis.length; i++){\n            ctx.drawImage(imageEnnemi1Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n          }\n        else if (cptTmpEnnemis>=15 && cptTmpEnnemis < 30)\n          for(let i = 0; i<ensEnnemis.length; i++){\n            ctx.drawImage(imageEnnemi1Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n          }\n        else if (cptTmp>=30 && cptTmp < 45)\n          for(let i = 0; i<ensEnnemis.length; i++){\n            ctx.drawImage(imageEnnemi1Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n          }\n        else{\n          for(let i = 0; i<ensEnnemis.length; i++){\n            ctx.drawImage(imageEnnemi1Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n          }\n        }\n      }\n    }*/\n\n    for (var _i5 = 0; _i5 < state.balle.length; _i5++) {\n      /*for(let j=0; j<state.ennemis.length; j++){\n        if(state.balle[i].x!=state.ennemis[j].x && state.balle[i].y!=state.ennemis[j].y){\n          ctx.drawImage(imageBalleUrl,state.balle[i].x,state.balle[i].y,25,25)\n        }\n      }*/\n      ctx.drawImage(imageBalleUrl, state.balle[_i5].x, state.balle[_i5].y, 25, 25);\n    }\n\n    //animations Personnage\n    if (stateImagePerso) {\n      if (walkcycle == false) {\n        cptTmp = 0;\n        if (rotate == true) {\n          ctx.drawImage(imagePersoUrlD, state.joueur.pos.x - dimPersoX / 2, state.joueur.pos.y - dimPersoY / 2, dimPersoX, dimPersoY);\n        } else {\n          ctx.drawImage(imagePersoUrl, state.joueur.pos.x - dimPersoX / 2, state.joueur.pos.y - dimPersoY / 2, dimPersoX, dimPersoY);\n        }\n      } else {\n        if (rotate == true) {\n          cptTmp = (cptTmp + 1) % 60;\n          if (cptTmp < 15) ctx.drawImage(imageMarche1DUrl, state.joueur.pos.x - dimPersoX / 2, state.joueur.pos.y - dimPersoY / 2, dimPersoX, dimPersoY);else if (cptTmp >= 15 && cptTmp < 30) ctx.drawImage(imageMarche2DUrl, state.joueur.pos.x - dimPersoX / 2, state.joueur.pos.y - dimPersoY / 2, dimPersoX - 30, dimPersoY);else if (cptTmp >= 30 && cptTmp < 45) ctx.drawImage(imageMarche3DUrl, state.joueur.pos.x - dimPersoX / 2, state.joueur.pos.y - dimPersoY / 2, dimPersoX, dimPersoY);else {\n            ctx.drawImage(imageMarche4DUrl, state.joueur.pos.x - dimPersoX / 2, state.joueur.pos.y - dimPersoY / 2, dimPersoX - 30, dimPersoY);\n          }\n        } else {\n          cptTmp = (cptTmp + 1) % 60;\n          if (cptTmp < 15) ctx.drawImage(imageMarche1Url, state.joueur.pos.x - dimPersoX / 2, state.joueur.pos.y - dimPersoY / 2, dimPersoX, dimPersoY);else if (cptTmp >= 15 && cptTmp < 30) ctx.drawImage(imageMarche2Url, state.joueur.pos.x - dimPersoX / 2, state.joueur.pos.y - dimPersoY / 2, dimPersoX - 30, dimPersoY);else if (cptTmp >= 30 && cptTmp < 45) ctx.drawImage(imageMarche3Url, state.joueur.pos.x - dimPersoX / 2, state.joueur.pos.y - dimPersoY / 2, dimPersoX, dimPersoY);else {\n            ctx.drawImage(imageMarche4Url, state.joueur.pos.x - dimPersoX / 2, state.joueur.pos.y - dimPersoY / 2, dimPersoX - 30, dimPersoY);\n          }\n        }\n      }\n    }\n\n    //affichage fin du niveau\n    ctx.drawImage(imageCoeurUrl, 5900, 580, 100, 100);\n    ctx.restore();\n  };\n};\nvar computeColor = function computeColor(life, maxLife, baseColor) {\n  return rgbaTorgb(baseColor, (maxLife - life) * (1 / maxLife));\n};\nexport var render = function render(ctx, plats) {\n  return function (state) {\n    clear(ctx);\n    frame++;\n    frame = frame % 20;\n    displayImages(ctx)(state);\n    /*state.pos.map((c) =>\n      drawCirle(\n        ctx,\n        props,\n        c.coord,\n        computeColor(c.life, conf.BALLLIFE, COLORS.GREEN)\n      )\n    )\n    drawCirle(\n      ctx,\n      props,\n      state.player.coord,\n      computeColor(state.player.life, conf.PLAYERLIFE, COLORS.BLUE)\n    )*/\n\n    //console.log(plats[0][0])\n\n    if (!state.endOfGame) {\n      var text = 'END';\n      ctx.fillStyle = COLORS.RED;\n      ctx.font = '200px';\n      ctx.strokeText(text, state.camera.x + 200, state.camera.y + 200);\n    }\n  };\n};","map":{"version":3,"names":["walkcycle","rotate","walkcycleEnnemis","imageSol","imageCoeur","imagePerso","imagePersoD","fond1","fond2","fond3","fond4","marche1","marche2","marche3","marche4","marche1d","marche2d","marche3d","marche4d","ennemi1","ennemi2","ennemi3","ennemi1D","ennemi2D","ennemi3D","ennemiv1","ennemiv2","ennemiv3","balleImg","mort1","mort2","mort3","mort4","mort5","mort6","mort7","mort8","pf","imageMur","ensEnnemis","ensPlat","COLORS","RED","GREEN","BLUE","oldrotate","frame","dimPersoX","dimPersoY","stateImageSol","stateImageCoeur","stateImagePerso","stateFond","stateEnnemi","imageCoeurUrl","Image","imageSolUrl","imagePersoUrl","imagePersoUrlD","imageFond1Url","imageFond2Url","imageFond3Url","imageFond4Url","imageMarche1Url","imageMarche2Url","imageMarche3Url","imageMarche4Url","imageMarche1DUrl","imageMarche2DUrl","imageMarche3DUrl","imageMarche4DUrl","imageEnnemi1Url","imageEnnemi2Url","imageEnnemi3Url","imageEnnemi1DUrl","imageEnnemi2DUrl","imageEnnemi3DUrl","ennemiV1Url","ennemiV2Url","ennemiV3Url","imageBalleUrl","mort1URL","mort2URL","mort3URL","mort4URL","mort5URL","mort6URL","mort7URL","mort8URL","imagePF","imageMurUrl","src","onload","toDoubleHexa","n","toString","rgbaTorgb","rgb","alpha","arguments","length","undefined","r","g","b","startsWith","hexR","slice","hexG","hexB","parseInt","val","replace","splitted","split","Math","max","min","floor","concat","clear","ctx","_ctx$canvas","canvas","height","width","fillStyle","fillRect","listMurs","canAnim","cptMort","animMort","state","x","y","drawImage","xMort","yMort","cptTmp","cptTmpEnnemis","displayImages","save","translate","camera","i","longueur","largeur","m","joueur","HP","type","ennemis","splice","balle","pos","restore","computeColor","life","maxLife","baseColor","render","plats","endOfGame","text","font","strokeText"],"sources":["/home/CPA/CPA/src/components/canvas/renderer.ts"],"sourcesContent":["import * as conf from './conf'\nimport { State } from './state'\nimport * as jeu from './game'\n\nimport {walkcycle,rotate,walkcycleEnnemis,rotateEnnemis} from './state'\n\nimport imageSol from './images/sol.png'\nimport imageCoeur from './images/coeur.png'\nimport imagePerso from './images/megaMan_static1.png'\nimport imagePersoD from './images/megaMan_static1_droite.png'\nimport fond1 from './images/background_1.png'\nimport fond2 from './images/background_2.png'\nimport fond3 from './images/background_3.png'\nimport fond4 from './images/background_4.png'\n\nimport marche1 from './images/megaMan_run1.png'\nimport marche2 from './images/megaMan_run2.png'\nimport marche3 from './images/megaMan_run3.png'\nimport marche4 from './images/megaMan_run4.png'\n\nimport marche1d from './images/megaMan_run1_droite.png'\nimport marche2d from './images/megaMan_run2_droite.png'\nimport marche3d from './images/megaMan_run3_droite.png'\nimport marche4d from './images/megaMan_run4_droite.png'\nimport ennemi1 from './images/enemy_boule/enemy_boule_3.png'\nimport ennemi2 from './images/enemy_boule/enemy_boule_4.png'\nimport ennemi3 from './images/enemy_boule/enemy_boule_5.png'\nimport ennemi1D from './images/enemy_boule/enemy_boule_3_droite.png'\nimport ennemi2D from './images/enemy_boule/enemy_boule_4_droite.png'\nimport ennemi3D from './images/enemy_boule/enemy_boule_5_droite.png'\n\nimport ennemiv1 from './images/ennemy_volant/ennemy_volant_1.png'\nimport ennemiv2 from './images/ennemy_volant/ennemy_volant_2.png'\nimport ennemiv3 from './images/ennemy_volant/ennemy_volant_3.png'\n\nimport balleImg from './images/oeuf.png'\n\nimport mort1 from './images/mort/mort_1.png'\nimport mort2 from './images/mort/mort_2.png'\nimport mort3 from './images/mort/mort_3.png'\nimport mort4 from './images/mort/mort_4.png'\nimport mort5 from './images/mort/mort_5.png'\nimport mort6 from './images/mort/mort_6.png'\nimport mort7 from './images/mort/mort_7.png'\nimport mort8 from './images/mort/mort_8.png'\n\n\nimport pf from './images/plateforme_city.png'\nimport imageMur from './images/mur.png'\n\nimport { ensEnnemis, ensPlat } from './index'\n\nconst COLORS = {\n  RED: '#ff0000',\n  GREEN: '#008800',\n  BLUE: '#0000ff',\n}\n\nlet oldrotate = false\n\nlet frame = 0\n\nexport var dimPersoX = 100\nexport var dimPersoY = 100\n\nlet stateImageSol = false\nlet stateImageCoeur = false\nlet stateImagePerso = false\nlet stateFond = false\nlet stateEnnemi=false\n\nconst imageCoeurUrl = new Image();\nconst imageSolUrl = new Image();\nconst imagePersoUrl = new Image();\nconst imagePersoUrlD = new Image();\nconst imageFond1Url = new Image();\nconst imageFond2Url = new Image();\nconst imageFond3Url = new Image();\nconst imageFond4Url = new Image();\nconst imageMarche1Url = new Image();\nconst imageMarche2Url = new Image();\nconst imageMarche3Url = new Image();\nconst imageMarche4Url = new Image();\nconst imageMarche1DUrl = new Image();\nconst imageMarche2DUrl = new Image();\nconst imageMarche3DUrl = new Image();\nconst imageMarche4DUrl = new Image();\nconst imageEnnemi1Url = new Image();\nconst imageEnnemi2Url = new Image();\nconst imageEnnemi3Url = new Image();\nconst imageEnnemi1DUrl = new Image();\nconst imageEnnemi2DUrl = new Image();\nconst imageEnnemi3DUrl = new Image();\n\nconst ennemiV1Url = new Image();\nconst ennemiV2Url = new Image();\nconst ennemiV3Url = new Image();\n\nconst imageBalleUrl = new Image();\n\nconst mort1URL = new Image();\nconst mort2URL = new Image();\nconst mort3URL = new Image();\nconst mort4URL = new Image();\nconst mort5URL = new Image();\nconst mort6URL = new Image();\nconst mort7URL = new Image();\nconst mort8URL = new Image();\n\n\nconst imagePF = new Image();\nconst imageMurUrl = new Image();\n\nimagePF.src = pf;\nimageCoeurUrl.src = imageCoeur;\nimageSolUrl.src = imageSol;\nimagePersoUrl.src = imagePerso;\nimagePersoUrlD.src = imagePersoD;\nimageFond1Url.src = fond1;\nimageFond2Url.src = fond2;\nimageFond3Url.src = fond3;\nimageFond4Url.src = fond4;\nimageMarche1Url.src = marche1;\nimageMarche2Url.src = marche2;\nimageMarche3Url.src = marche3;\nimageMarche4Url.src = marche4;\nimageMarche1DUrl.src = marche1d;\nimageMarche2DUrl.src = marche2d;\nimageMarche3DUrl.src = marche3d;\nimageMarche4DUrl.src = marche4d;\nimageEnnemi1Url.src = ennemi1;\nimageEnnemi2Url.src = ennemi2;\nimageEnnemi3Url.src = ennemi3;\nimageEnnemi1DUrl.src = ennemi1D;\nimageEnnemi2DUrl.src = ennemi2D;\nimageEnnemi3DUrl.src = ennemi3D;\n\nennemiV1Url.src = ennemiv1;\nennemiV2Url.src = ennemiv2;\nennemiV3Url.src = ennemiv3;\n\nimageBalleUrl.src = balleImg;\n\nmort1URL.src = mort1;\nmort2URL.src = mort2;\nmort3URL.src = mort3;\nmort4URL.src = mort4;\nmort5URL.src = mort5;\nmort6URL.src = mort6;\nmort7URL.src = mort7;\nmort8URL.src = mort8;\n\n\nimageMurUrl.src = imageMur;\n\nimageSolUrl.onload = () => {\n  stateImageSol = true\n}\n\nimageCoeurUrl.onload = () => {\n  stateImageCoeur = true\n}\n\nimagePersoUrl.onload = () => {\n  stateImagePerso = true\n}\n\nimageFond1Url.onload = () => {\n  stateFond = true\n}\nimageEnnemi1Url.onload = () =>{\n  stateEnnemi = true\n}\n\nconst toDoubleHexa = (n: number) =>\n  n < 16 ? '0' + n.toString(16) : n.toString(16)\n\nexport const rgbaTorgb = (rgb: string, alpha = 0) => {\n  let r = 0\n  let g = 0\n  let b = 0\n  if (rgb.startsWith('#')) {\n    const hexR = rgb.length === 7 ? rgb.slice(1, 3) : rgb[1]\n    const hexG = rgb.length === 7 ? rgb.slice(3, 5) : rgb[2]\n    const hexB = rgb.length === 7 ? rgb.slice(5, 7) : rgb[3]\n    r = parseInt(hexR, 16)\n    g = parseInt(hexG, 16)\n    b = parseInt(hexB, 16)\n  }\n  if (rgb.startsWith('rgb')) {\n    const val = rgb.replace(/(rgb)|\\(|\\)| /g, '')\n    const splitted = val.split(',')\n    r = parseInt(splitted[0])\n    g = parseInt(splitted[1])\n    b = parseInt(splitted[2])\n  }\n\n  r = Math.max(Math.min(Math.floor((1 - alpha) * r + alpha * 255), 255), 0)\n  g = Math.max(Math.min(Math.floor((1 - alpha) * g + alpha * 255), 255), 0)\n  b = Math.max(Math.min(Math.floor((1 - alpha) * b + alpha * 255), 255), 0)\n  return `#${toDoubleHexa(r)}${toDoubleHexa(g)}${toDoubleHexa(b)}`\n}\n\nconst clear = (ctx: CanvasRenderingContext2D) => {\n  const { height, width } = ctx.canvas\n  ctx.fillStyle = 'white'\n  ctx.fillRect(0, 0, width, height)\n}\n\n\n/*\nexport type RenderProps = {\n  pos: { x: number; y: number }\n  scale: number\n}\n\nconst drawCirle = (\n  ctx: CanvasRenderingContext2D,\n  renderProps: RenderProps,\n  { x, y }: { x: number; y: number },\n  color: string\n) => {\n  ctx.beginPath()\n  ctx.fillStyle = color\n  ctx.arc(\n    (x + renderProps.pos.x) * renderProps.scale,\n    (y + renderProps.pos.y) * renderProps.scale,\n    conf.RADIUS * renderProps.scale,\n    0,\n    2 * Math.PI\n  )\n  ctx.fill()\n}*/\n\nlet listMurs = [[0, -20, 100, 800],[2400, 385, 100, 300],[2400, 385, 100, 300],[3400, 385, 100, 300],[6000, -20, 100, 800]]\n\n//booleen pour verifier si l'on peut animer la mort d'un ennemi ou non\nlet canAnim = false\n\n//compteur pour l'animation de mort\nlet cptMort = 0\n\nconst animMort = (ctx: CanvasRenderingContext2D, state: State, x:number,y:number) => {\n  cptMort = (cptMort+1)%61\n  if(cptMort<7)\n    ctx.drawImage(mort1URL,x, y,80,80)\n  else if(cptMort>=7 && cptMort<15)\n    ctx.drawImage(mort2URL,x, y,80,80)\n  else if(cptMort>=15 && cptMort<22)\n    ctx.drawImage(mort3URL,x, y,80,80)\n  else if(cptMort>=22 && cptMort<30)\n    ctx.drawImage(mort4URL,x, y,80,80)\n  else if(cptMort>=30 && cptMort<37)\n    ctx.drawImage(mort5URL,x, y,80,80)\n  else if(cptMort>=37 && cptMort<45)\n    ctx.drawImage(mort6URL,x, y,80,80)\n  else if(cptMort>=45 && cptMort<52)\n    ctx.drawImage(mort7URL,x, y,80,80)\n  else if(cptMort>=52 && cptMort<60)\n    ctx.drawImage(mort8URL,x, y,80,80)\n  else{\n    canAnim = false\n    cptMort = (cptMort+1)%61\n  }\n\n}\n\nlet xMort=0\nlet yMort=0\n\n\nlet cptTmp = 0\nlet cptTmpEnnemis=0\nconst displayImages = (ctx: CanvasRenderingContext2D) => (state: State) => {\n  \n  //on déplace la caméra en prenant le joueur comme réferentiel\n  ctx.save();\n  ctx.translate(-(state.camera.x-ctx.canvas.width/2),0);\n\n  /*Il faut s'assurer que tous les éléments du fond (points de vie etc.. suivent la caméra)\n    Mais que tous les éléments fixes (plateformes/ennemis ne la suivent pas)\n  */\n  if(stateFond){\n    if(frame<5)\n      ctx.drawImage(imageFond1Url,state.camera.x-ctx.canvas.width/2,-200,1400,1000)\n    else if (frame>=5 && frame < 10)\n      ctx.drawImage(imageFond2Url,state.camera.x-ctx.canvas.width/2,-200,1400,1000)\n    else if (frame>=10 && frame < 15)\n      ctx.drawImage(imageFond3Url,state.camera.x-ctx.canvas.width/2,-200,1400,1000)\n    else{\n      ctx.drawImage(imageFond4Url,state.camera.x-ctx.canvas.width/2,-200,1400,1000)\n    }\n  }\n  \n\n  //affichage du sol\n  for(let i = 0; i<20; i++){\n      ctx.drawImage(imageSolUrl,i*495, 680, 500, 100)\n  }\n\n\n\n\n  for(let i = 0; i<ensPlat.length; i++){\n      ctx.drawImage(imagePF,ensPlat[i].x, ensPlat[i].y, ensPlat[i].longueur, ensPlat[i].largeur)\n      //ctx.fillStyle = 'red'\n      //ctx.fillRect(plats[i].x, plats[i].y, plats[i].longueur, plats[i].largeur)\n  }\n\n  //affichage des murs\n  for(let m=0; m<listMurs.length; m++){\n    ctx.drawImage(imageMurUrl,listMurs[m][0],listMurs[m][1] ,listMurs[m][2], listMurs[m][3])\n  }\n\n  for(let i=0; i<state.joueur.HP; i++){\n    ctx.drawImage(imageCoeurUrl,(state.camera.x-ctx.canvas.width/2)+i*60,10,50,50);\n  }\n  /*\n  if(stateImageCoeur){\n    ctx.drawImage(imageCoeurUrl,10+state.camera.x-ctx.canvas.width/2,10,50,50);\n    ctx.drawImage(imageCoeurUrl,70+state.camera.x-ctx.canvas.width/2,10,50,50);\n    ctx.drawImage(imageCoeurUrl,130+state.camera.x-ctx.canvas.width/2,10,50,50);\n  }*/\n\n  if(stateEnnemi){\n    if(walkcycleEnnemis==true){\n      cptTmpEnnemis= (cptTmpEnnemis+1)%60\n      for(let i = 0; i<ensEnnemis.length; i++){\n        if(ensEnnemis[i].rotate == true){\n          if(cptTmpEnnemis<15){\n            if(ensEnnemis[i].type == 'boule')\n              ctx.drawImage(imageEnnemi1DUrl,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n            else\n              ctx.drawImage(ennemiV1Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n          }\n          else if(cptTmpEnnemis>=15 && cptTmpEnnemis < 30){\n            if(ensEnnemis[i].type == 'boule')\n              ctx.drawImage(imageEnnemi2DUrl,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n            else\n              ctx.drawImage(ennemiV2Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n          }\n          else if(cptTmpEnnemis>=30 && cptTmpEnnemis < 45){\n            if(ensEnnemis[i].type == 'boule')\n              ctx.drawImage(imageEnnemi1DUrl,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n            else\n              ctx.drawImage(ennemiV1Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n          }\n          else{\n            if(ensEnnemis[i].type == 'boule')\n              ctx.drawImage(imageEnnemi3DUrl,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n            else\n              ctx.drawImage(ennemiV3Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n          }\n        }\n        else{\n          if(cptTmpEnnemis<15){\n            if(ensEnnemis[i].type == 'boule')\n              ctx.drawImage(imageEnnemi1Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n            else\n              ctx.drawImage(ennemiV1Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n          }\n          else if(cptTmpEnnemis>=15 && cptTmpEnnemis < 30){\n            if(ensEnnemis[i].type == 'boule')\n              ctx.drawImage(imageEnnemi2Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n            else\n              ctx.drawImage(ennemiV2Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n          }\n          else if(cptTmpEnnemis>=30 && cptTmpEnnemis < 45){\n            if(ensEnnemis[i].type == 'boule')\n              ctx.drawImage(imageEnnemi1Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n            else\n              ctx.drawImage(ennemiV1Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n          }\n          else{\n            if(ensEnnemis[i].type == 'boule')\n              ctx.drawImage(imageEnnemi3Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n            else\n              ctx.drawImage(ennemiV3Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n          }\n        }\n      }  \n    }\n      \n  }\n\n//animation mort ennemis\nfor(let i=0; i<state.ennemis.length; i++){\n  if(state.ennemis[i].HP <=0){\n    xMort = state.ennemis[i].x\n    yMort = state.ennemis[i].y\n    state.ennemis.splice(i,1)\n    canAnim = true\n  } \n}\nif(canAnim){\n  animMort(ctx,state,xMort,yMort)\n}\n\n\n    /*\n    else{\n      if(rotateEnnemis==true){\n        cptTmpEnnemis= (cptTmpEnnemis+1)%60\n        if(cptTmpEnnemis<15)\n          for(let i = 0; i<ensEnnemis.length; i++){\n            ctx.drawImage(imageEnnemi1Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n          }\n        else if (cptTmpEnnemis>=15 && cptTmpEnnemis < 30)\n          for(let i = 0; i<ensEnnemis.length; i++){\n            ctx.drawImage(imageEnnemi1Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n          }\n        else if (cptTmp>=30 && cptTmp < 45)\n          for(let i = 0; i<ensEnnemis.length; i++){\n            ctx.drawImage(imageEnnemi1Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n          }\n        else{\n          for(let i = 0; i<ensEnnemis.length; i++){\n            ctx.drawImage(imageEnnemi1Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n          }\n        }\n      }\n      else{\n        cptTmpEnnemis= (cptTmpEnnemis+1)%60\n        if(cptTmpEnnemis<15)\n          for(let i = 0; i<ensEnnemis.length; i++){\n            ctx.drawImage(imageEnnemi1Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n          }\n        else if (cptTmpEnnemis>=15 && cptTmpEnnemis < 30)\n          for(let i = 0; i<ensEnnemis.length; i++){\n            ctx.drawImage(imageEnnemi1Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n          }\n        else if (cptTmp>=30 && cptTmp < 45)\n          for(let i = 0; i<ensEnnemis.length; i++){\n            ctx.drawImage(imageEnnemi1Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n          }\n        else{\n          for(let i = 0; i<ensEnnemis.length; i++){\n            ctx.drawImage(imageEnnemi1Url,ensEnnemis[i].x, ensEnnemis[i].y,80,80)\n          }\n        }\n      }\n    }*/\n  \n  for(let i=0; i<state.balle.length; i++){\n    /*for(let j=0; j<state.ennemis.length; j++){\n      if(state.balle[i].x!=state.ennemis[j].x && state.balle[i].y!=state.ennemis[j].y){\n        ctx.drawImage(imageBalleUrl,state.balle[i].x,state.balle[i].y,25,25)\n      }\n    }*/\n    ctx.drawImage(imageBalleUrl,state.balle[i].x,state.balle[i].y,25,25)\n  }\n\n  //animations Personnage\n  if(stateImagePerso){\n\n    if(walkcycle==false){\n      cptTmp = 0\n      if(rotate == true){\n        ctx.drawImage(imagePersoUrlD,state.joueur.pos.x-(dimPersoX/2),state.joueur.pos.y-(dimPersoY/2),dimPersoX,dimPersoY);\n      }\n      else{\n          ctx.drawImage(imagePersoUrl,state.joueur.pos.x-(dimPersoX/2),state.joueur.pos.y-(dimPersoY/2),dimPersoX,dimPersoY);\n        }\n    }\n    else{\n      if(rotate==true){\n        cptTmp= (cptTmp+1)%60\n        if(cptTmp<15)\n          ctx.drawImage(imageMarche1DUrl,state.joueur.pos.x-(dimPersoX/2),state.joueur.pos.y-(dimPersoY/2),dimPersoX,dimPersoY)\n        else if (cptTmp>=15 && cptTmp < 30)\n          ctx.drawImage(imageMarche2DUrl,state.joueur.pos.x-(dimPersoX/2),state.joueur.pos.y-(dimPersoY/2),dimPersoX-30,dimPersoY)\n        else if (cptTmp>=30 && cptTmp < 45)\n          ctx.drawImage(imageMarche3DUrl,state.joueur.pos.x-(dimPersoX/2),state.joueur.pos.y-(dimPersoY/2),dimPersoX,dimPersoY)\n        else{\n          ctx.drawImage(imageMarche4DUrl,state.joueur.pos.x-(dimPersoX/2),state.joueur.pos.y-(dimPersoY/2),dimPersoX-30,dimPersoY)\n        }\n      }\n      else{\n        cptTmp= (cptTmp+1)%60\n        if(cptTmp<15)\n          ctx.drawImage(imageMarche1Url,state.joueur.pos.x-(dimPersoX/2),state.joueur.pos.y-(dimPersoY/2),dimPersoX,dimPersoY)\n        else if (cptTmp>=15 && cptTmp < 30)\n          ctx.drawImage(imageMarche2Url,state.joueur.pos.x-(dimPersoX/2),state.joueur.pos.y-(dimPersoY/2),dimPersoX-30,dimPersoY)\n        else if (cptTmp>=30 && cptTmp < 45)\n          ctx.drawImage(imageMarche3Url,state.joueur.pos.x-(dimPersoX/2),state.joueur.pos.y-(dimPersoY/2),dimPersoX,dimPersoY)\n        else{\n          ctx.drawImage(imageMarche4Url,state.joueur.pos.x-(dimPersoX/2),state.joueur.pos.y-(dimPersoY/2),dimPersoX-30,dimPersoY)\n        }\n      }\n    }\n  }\n\n  //affichage fin du niveau\n  ctx.drawImage(imageCoeurUrl,5900,580,100,100)\n\n\n  \n  ctx.restore();\n}\n\nconst computeColor = (life: number, maxLife: number, baseColor: string) =>\n  rgbaTorgb(baseColor, (maxLife - life) * (1 / maxLife))\n\nexport const render =\n  (ctx: CanvasRenderingContext2D/*, props: RenderProps*/, plats: Array<jeu.Plateforme>) => (state: State) => {\n    clear(ctx)\n    frame ++\n    frame = frame%20\n\n    displayImages(ctx)(state)\n    /*state.pos.map((c) =>\n      drawCirle(\n        ctx,\n        props,\n        c.coord,\n        computeColor(c.life, conf.BALLLIFE, COLORS.GREEN)\n      )\n    )\n    drawCirle(\n      ctx,\n      props,\n      state.player.coord,\n      computeColor(state.player.life, conf.PLAYERLIFE, COLORS.BLUE)\n    )*/\n\n    \n    //console.log(plats[0][0])\n    \n    if (!state.endOfGame) {\n      const text = 'END'\n      ctx.fillStyle = COLORS.RED\n      ctx.font = '200px'\n      ctx.strokeText(text, state.camera.x+200,state.camera.y+200)\n    }\n  }\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}