{"ast":null,"code":"import _objectSpread from \"/home/yanis/FAC/cpaProjetFinal/CPA/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport * as conf from './conf';\nimport { dimPersoX, dimPersoY } from './renderer';\nexport var walkcycle = false;\nexport var rotate = false;\nexport var walkcycleEnnemis = false;\nexport var rotateEnnemis = false;\nvar jump = function jump(state) {\n  return state.joueur.velY = -20;\n};\nvar dist2 = function dist2(o1, o2) {\n  return Math.pow(o1.x - o2.x, 2) + Math.pow(o1.y - o2.y, 2);\n};\nvar collide = function collide(o1, o2) {\n  return dist2(o1, o2) < Math.pow(2 * conf.RADIUS, 2);\n};\nvar collideBoing = function collideBoing(p1, p2) {\n  var nx = (p2.x - p1.x) / (2 * conf.RADIUS);\n  var ny = (p2.y - p1.y) / (2 * conf.RADIUS);\n  var gx = -ny;\n  var gy = nx;\n  var v1g = gx * p1.dx + gy * p1.dy;\n  var v2n = nx * p2.dx + ny * p2.dy;\n  var v2g = gx * p2.dx + gy * p2.dy;\n  var v1n = nx * p1.dx + ny * p1.dy;\n  p1.dx = nx * v2n + gx * v1g;\n  p1.dy = ny * v2n + gy * v1g;\n  p2.dx = nx * v1n + gx * v2g;\n  p2.dy = ny * v1n + gy * v2g;\n  p1.x += p1.dx;\n  p1.y += p1.dy;\n  p2.x += p2.dx;\n  p2.y += p2.dy;\n};\nvar cpt = 0;\nvar t = 0.0;\nvar currentTime = Date.now();\nvar friction = 0.95;\nvar gravity = 1.25;\nvar auSol = false;\nvar currenty = 0;\nvar previousy = 0;\nvar invincible = 0;\nexport var collide_plat = function collide_plat(state) {\n  console.log(state.joueur.pos.x + \" \" + state.joueur.pos.y);\n  for (var i = 0; i < state.platforms.length; i++) {\n    /*gauche*/\n    if (state.joueur.pos.x + dimPersoX / 2 > state.platforms[i].x && state.joueur.pos.y + dimPersoY / 2 >= state.platforms[i].y && state.joueur.pos.y - dimPersoY / 2 <= state.platforms[i].y + state.platforms[i].largeur && state.joueur.pos.x + dimPersoX / 2 < state.platforms[i].x + 10) {\n      state.joueur.pos.x = state.platforms[i].x - dimPersoX / 2;\n    }\n    /*droite*/\n    if (state.joueur.pos.x - dimPersoX / 2 < state.platforms[i].x + state.platforms[i].longueur && state.joueur.pos.y + dimPersoY / 2 >= state.platforms[i].y && state.joueur.pos.y - dimPersoY / 2 <= state.platforms[i].y + state.platforms[i].largeur && state.joueur.pos.x - dimPersoX / 2 > state.platforms[i].x + state.platforms[i].longueur - 10) {\n      state.joueur.pos.x = state.platforms[i].x + state.platforms[i].longueur + dimPersoX / 2;\n    }\n    /*bas*/\n    if (state.joueur.pos.y - dimPersoY / 2 < state.platforms[i].y + state.platforms[i].largeur && state.joueur.pos.x + dimPersoX / 2 > state.platforms[i].x && state.joueur.pos.x - dimPersoX / 2 < state.platforms[i].x + state.platforms[i].longueur && state.joueur.pos.y + dimPersoY / 2 > state.platforms[i].y + state.platforms[i].largeur - 35) {\n      state.joueur.pos.y = state.platforms[i].y + state.platforms[i].largeur + dimPersoY / 2;\n    }\n\n    /*haut*/\n    if (state.joueur.pos.y + dimPersoY / 2 > state.platforms[i].y && state.joueur.pos.x + dimPersoX / 2 > state.platforms[i].x && state.joueur.pos.x - dimPersoX / 2 < state.platforms[i].x + state.platforms[i].longueur && state.joueur.pos.y - dimPersoY / 2 < state.platforms[i].y + 35) {\n      state.joueur.pos.y = state.platforms[i].y - dimPersoY / 2;\n      state.joueur.velY = 0;\n    }\n  }\n};\nexport var collide_ennemi = function collide_ennemi(state) {\n  console.log(state.joueur.pos.x + \" \" + state.joueur.pos.y);\n  for (var i = 0; i < state.ennemis.length; i++) {\n    if (state.joueur.pos.x + dimPersoX / 2 > state.ennemis[i].x && state.joueur.pos.y + dimPersoY / 2 >= state.ennemis[i].y && state.joueur.pos.y - dimPersoY / 2 <= state.ennemis[i].y + 80 && state.joueur.pos.x + dimPersoX / 2 < state.ennemis[i].x + 10) {\n      state.joueur.HP--;\n      if (state.joueur.HP < 0) state.joueur.HP = 0;\n    }\n    if (state.joueur.pos.x - dimPersoX / 2 < state.ennemis[i].x + 80 && state.joueur.pos.y + dimPersoY / 2 >= state.ennemis[i].y && state.joueur.pos.y - dimPersoY / 2 <= state.ennemis[i].y + 80 && state.joueur.pos.x - dimPersoX / 2 > state.ennemis[i].x + 80 - 10) {\n      state.joueur.HP--;\n      if (state.joueur.HP < 0) state.joueur.HP = 0;\n    }\n    if (state.joueur.pos.y - dimPersoY / 2 < state.ennemis[i].y + 80 && state.joueur.pos.x + dimPersoX / 2 > state.ennemis[i].x + 10 && state.joueur.pos.x - dimPersoX / 2 < state.ennemis[i].x + 80 && state.joueur.pos.y + dimPersoY / 2 > state.ennemis[i].y + 80 - 40) {\n      state.joueur.HP--;\n      if (state.joueur.HP < 0) state.joueur.HP = 0;\n    }\n    if (state.joueur.pos.y + dimPersoY / 2 > state.ennemis[i].y && state.joueur.pos.x + dimPersoX / 2 > state.ennemis[i].x + 10 && state.joueur.pos.x - dimPersoX / 2 < state.ennemis[i].x + 80 && state.joueur.pos.y - dimPersoY / 2 < state.ennemis[i].y + 40) {\n      state.joueur.HP--;\n      if (state.joueur.HP < 0) state.joueur.HP = 0;\n    }\n  }\n};\nexport var collide_platEnnemis = function collide_platEnnemis(state) {\n  for (var i = 0; i < state.platforms.length; i++) {\n    for (var j = 0; j < state.ennemis.length; j++) {\n      /*gauche*/\n      if (state.ennemis[j].x + 80 / 2 > state.platforms[i].x && state.ennemis[j].y + 80 / 2 >= state.platforms[i].y && state.ennemis[j].y - 80 / 2 <= state.platforms[i].y + state.platforms[i].largeur && state.ennemis[j].x + 80 / 2 < state.platforms[i].x + 10) {\n        state.ennemis[j].x = state.platforms[i].x - 80 / 2;\n        state.ennemis[j].speed = -state.ennemis[j].speed;\n      }\n      /*droite*/\n      if (state.ennemis[j].x - 80 / 2 < state.platforms[i].x + state.platforms[i].longueur && state.ennemis[j].y + 80 / 2 >= state.platforms[i].y && state.ennemis[j].y - 80 / 2 <= state.platforms[i].y + state.platforms[i].largeur && state.ennemis[j].x - 80 / 2 > state.platforms[i].x + state.platforms[i].longueur - 10) {\n        state.ennemis[j].x = state.platforms[i].x + state.platforms[i].longueur + 80 / 2;\n        state.ennemis[j].speed = -state.ennemis[j].speed;\n      }\n      /*bas*/\n      if (state.ennemis[j].y - 80 / 2 < state.platforms[i].y + state.platforms[i].largeur && state.ennemis[j].x + 80 / 2 > state.platforms[i].x && state.ennemis[j].x - 80 / 2 < state.platforms[i].x + state.platforms[i].longueur && state.ennemis[j].y + 80 / 2 > state.platforms[i].y + state.platforms[i].largeur - 35) {\n        state.ennemis[j].y = state.platforms[i].y + state.platforms[i].largeur + 80 / 2;\n      }\n\n      /*haut*/\n      if (state.ennemis[j].y + 80 / 2 > state.platforms[i].y && state.ennemis[j].x + 80 / 2 > state.platforms[i].x && state.ennemis[j].x - 80 / 2 < state.platforms[i].x + state.platforms[i].longueur && state.ennemis[j].y - 80 / 2 < state.platforms[i].y + 35) {\n        state.ennemis[j].y = state.platforms[i].y - 80 / 2;\n        state.joueur.velY = 0;\n      }\n    }\n  }\n};\nexport var step = function step(state) {\n  console.log(state.platforms);\n  currenty = state.joueur.pos.y;\n  var newTime = Date.now();\n  var frameTime = newTime - currentTime;\n  currentTime = newTime;\n  state.pos.map(function (p1, i, arr) {\n    arr.slice(i + 1).map(function (p2) {\n      if (collide(p1.coord, p2.coord)) {\n        if (!p1.invincible) {\n          p1.life--;\n          p1.invincible = 20;\n        }\n        if (!p2.invincible) {\n          p2.life--;\n          p2.invincible = 20;\n        }\n        collideBoing(p1.coord, p2.coord);\n      }\n    });\n  });\n\n  //if (frameTime > 1000/60) {\n\n  //newTime = currentTime - (frameTime % (1000/60));\n\n  document.addEventListener('keydown', function (event) {\n    var name = event.key;\n    if (name === 'z') {\n      if (auSol) {\n        jump(state);\n        //state.joueur.velY = -7;\n      }\n      //state.joueur.pos = perso.moveUp(state.joueur,frameTime)\n    }\n    /*\n    if(name==='s'){\n      if (state.joueur.velY < state.joueur.speed) {\n        state.joueur.velY=7;\n      }\n       //state.joueur.pos=perso.moveDown(state.joueur,frameTime)\n    }\n    */\n    if (name === 'q') {\n      if (state.joueur.velX > -state.joueur.speed) {\n        state.joueur.velX = -state.joueur.speed + 3;\n        walkcycle = true;\n        if (rotate == true) rotate = false;\n      }\n      //state.joueur.pos= perso.moveLeft(state.joueur,frameTime)\n    }\n\n    if (name === 'd') {\n      if (state.joueur.velX < state.joueur.speed) {\n        state.joueur.velX = state.joueur.speed - 3;\n        walkcycle = true;\n        if (rotate == false) rotate = true;\n      }\n      // state.joueur.pos= perso.moveRight(state.joueur,frameTime)\n    }\n  }, false);\n  document.addEventListener('keyup', function (event) {\n    var name = event.key;\n\n    /*if(name==='z'){\n      if (state.joueur.velY > -state.joueur.speed) {\n        state.joueur.velY = 0;\n      }\n      //state.joueur.pos = perso.moveUp(state.joueur,frameTime)\n    }\n    if(name==='s'){\n      if (state.joueur.velY < state.joueur.speed) {\n        state.joueur.velY=0;\n      }\n       //state.joueur.pos=perso.moveDown(state.joueur,frameTime)\n    }*/\n    if (name === 'q') {\n      if (state.joueur.velX > -state.joueur.speed) {\n        state.joueur.velX = 0;\n        walkcycle = false;\n      }\n      //state.joueur.pos= perso.moveLeft(state.joueur,frameTime)\n    }\n\n    if (name === 'd') {\n      if (state.joueur.velX < state.joueur.speed) {\n        state.joueur.velX = 0;\n        walkcycle = false;\n      }\n      // state.joueur.pos= perso.moveRight(state.joueur,frameTime)\n    }\n  }, false);\n\n  //}\n\n  //state.joueur.velY *= friction;\n  state.joueur.pos.y += state.joueur.velY;\n  //state.joueur.velX *= friction;\n  state.joueur.pos.x += state.joueur.velX;\n  state.joueur.velY += gravity;\n  if (state.joueur.pos.y > 625) {\n    state.joueur.pos.y = 625;\n  }\n\n  //deplacement Ennemis\n  for (var j = 0; j < state.ennemis.length; j++) {\n    //on verifie si l'ennemi doit changer de direction car il a parcouru sa distance\n    if (Math.abs(state.ennemis[j].dist_parcouru) > state.ennemis[j].dist_max) {\n      state.ennemis[j].speed = -state.ennemis[j].speed;\n      state.ennemis[j].dist_parcouru;\n      if (state.ennemis[j].rotate == true) state.ennemis[j].rotate = false;else state.ennemis[j].rotate = true;\n    }\n    state.ennemis[j].velX = state.ennemis[j].speed;\n    walkcycleEnnemis = true;\n    state.ennemis[j].y += state.ennemis[j].velY;\n    state.ennemis[j].x += state.ennemis[j].velX;\n    //distance parcourue\n    state.ennemis[j].dist_parcouru += state.ennemis[j].velX;\n    state.ennemis[j].velY += gravity;\n    if (state.ennemis[j].y > 612) {\n      state.ennemis[j].y = 612;\n    }\n\n    //on verifie si l'ennemi doit changer de direction car il a recnontré une plateforme\n    collide_platEnnemis(state);\n  }\n  collide_plat(state);\n  collide_ennemi(state);\n  if (currenty == previousy) {\n    auSol = true;\n  } else {\n    auSol = false;\n  }\n  previousy = currenty;\n\n  //mouvement Camera\n  if (state.joueur.pos.x > 700) {\n    state.camera.x = state.joueur.pos.x;\n    state.camera.y = state.joueur.pos.y;\n  }\n  if (state.player.invincible) state.player.invincible--;\n  state.pos.map(function (p1, i) {\n    if (collide(p1.coord, state.player.coord)) {\n      collideBoing(p1.coord, state.player.coord);\n      if (!state.player.invincible) {\n        state.player.life--;\n        state.player.invincible = 20;\n      }\n      if (!p1.invincible) {\n        p1.life--;\n        p1.invincible = 20;\n      }\n    }\n  });\n  return _objectSpread({}, state);\n};\nexport var stepAuto = function stepAuto(state) {\n  return _objectSpread({}, state);\n};\nexport var mouseMove = function mouseMove(state) {\n  return function (event) {\n    return state;\n  };\n};\nexport var endOfGame = function endOfGame(state) {\n  return state.player.life > 0 && state.pos.length > 0;\n};","map":{"version":3,"names":["conf","dimPersoX","dimPersoY","walkcycle","rotate","walkcycleEnnemis","rotateEnnemis","jump","state","joueur","velY","dist2","o1","o2","Math","pow","x","y","collide","RADIUS","collideBoing","p1","p2","nx","ny","gx","gy","v1g","dx","dy","v2n","v2g","v1n","cpt","t","currentTime","Date","now","friction","gravity","auSol","currenty","previousy","invincible","collide_plat","console","log","pos","i","platforms","length","largeur","longueur","collide_ennemi","ennemis","HP","collide_platEnnemis","j","speed","step","newTime","frameTime","map","arr","slice","coord","life","document","addEventListener","event","name","key","velX","abs","dist_parcouru","dist_max","camera","player","_objectSpread","stepAuto","mouseMove","endOfGame"],"sources":["/home/yanis/FAC/cpaProjetFinal/CPA/src/components/canvas/state.ts"],"sourcesContent":["import * as conf from './conf'\nimport * as jeu from './game'\n\nimport { dimPersoX , dimPersoY} from './renderer'\n\ntype Player = jeu.Player\ntype Platform = jeu.Plateforme\ntype Camera = jeu.Camera\ntype Ennemi = jeu.Ennemi\n\ntype Coord = { x: number; y: number; dx: number; dy: number }\ntype Ball = { coord: Coord; life: number; invincible?: number }\ntype Size = { height: number; width: number }\nexport type State = {\n  pos: Array<Ball>\n  press?: { start: number; pos: { x: number; y: number } }\n  size: Size\n  player: Ball\n  endOfGame: boolean\n  joueur : Player\n  platforms: Array<Platform>\n  camera: Camera\n  ennemis: Array<Ennemi>\n}\n\nexport var walkcycle = false\n\nexport var rotate = false\n\nexport var walkcycleEnnemis = false\n\nexport var rotateEnnemis = false\n\nconst jump = (state: State) =>\n  state.joueur.velY = -20;\n\nconst dist2 = (o1: Coord, o2: Coord) =>\n  Math.pow(o1.x - o2.x, 2) + Math.pow(o1.y - o2.y, 2)\n\nconst collide = (o1: Coord, o2: Coord) =>\n  dist2(o1, o2) < Math.pow(2 * conf.RADIUS, 2)\n\nconst collideBoing = (p1: Coord, p2: Coord) => {\n  const nx = (p2.x - p1.x) / (2 * conf.RADIUS)\n  const ny = (p2.y - p1.y) / (2 * conf.RADIUS)\n  const gx = -ny\n  const gy = nx\n\n  const v1g = gx * p1.dx + gy * p1.dy\n  const v2n = nx * p2.dx + ny * p2.dy\n  const v2g = gx * p2.dx + gy * p2.dy\n  const v1n = nx * p1.dx + ny * p1.dy\n  p1.dx = nx * v2n + gx * v1g\n  p1.dy = ny * v2n + gy * v1g\n  p2.dx = nx * v1n + gx * v2g\n  p2.dy = ny * v1n + gy * v2g\n  p1.x += p1.dx\n  p1.y += p1.dy\n  p2.x += p2.dx\n  p2.y += p2.dy\n}\n\nlet cpt = 0\n\nlet t = 0.0;\n\nlet currentTime = Date.now()\n\nlet friction = 0.95\n\nlet gravity = 1.25\n\nlet auSol = false\n\nlet currenty = 0\n\nlet previousy = 0\n\nlet invincible = 0\n\nexport const collide_plat = (state: State) => {\n  console.log(state.joueur.pos.x +\" \"+ state.joueur.pos.y )\n  for(let i=0; i<state.platforms.length;i++){\n\n    /*gauche*/\n    if (state.joueur.pos.x+dimPersoX/2 > state.platforms[i].x && state.joueur.pos.y+dimPersoY/2 >=state.platforms[i].y \n      && state.joueur.pos.y - dimPersoY/2 <=(state.platforms[i].y + state.platforms[i].largeur)&& state.joueur.pos.x+dimPersoX/2 <(state.platforms[i].x +10)){\n        state.joueur.pos.x =state.platforms[i].x-dimPersoX/2;\n    }\n    /*droite*/\n    if (state.joueur.pos.x-dimPersoX/2 < (state.platforms[i].x +state.platforms[i].longueur )&& state.joueur.pos.y+dimPersoY/2 >=state.platforms[i].y \n      && state.joueur.pos.y - dimPersoY/2 <=(state.platforms[i].y + state.platforms[i].largeur) && state.joueur.pos.x-dimPersoX/2 > (state.platforms[i].x +state.platforms[i].longueur -10) ){\n        state.joueur.pos.x =state.platforms[i].x +state.platforms[i].longueur+dimPersoX/2;\n    }\n    /*bas*/\n    if (state.joueur.pos.y-dimPersoY/2 < (state.platforms[i].y+state.platforms[i].largeur) && state.joueur.pos.x+dimPersoX/2 >state.platforms[i].x \n      && state.joueur.pos.x-dimPersoX/2<(state.platforms[i].x + state.platforms[i].longueur)&& state.joueur.pos.y+dimPersoY/2> (state.platforms[i].y+state.platforms[i].largeur-35)){\n        state.joueur.pos.y =state.platforms[i].y + state.platforms[i].largeur + dimPersoY/2;\n    }\n    \n    /*haut*/\n    if (state.joueur.pos.y+dimPersoY/2 > state.platforms[i].y && state.joueur.pos.x+dimPersoX/2 > state.platforms[i].x \n      && state.joueur.pos.x-dimPersoX/2 < (state.platforms[i].x + state.platforms[i].longueur) && (state.joueur.pos.y-dimPersoY/2 <state.platforms[i].y +35)){\n        state.joueur.pos.y =state.platforms[i].y-dimPersoY/2;\n        state.joueur.velY=0;\n    }\n  }\n}\n  export const collide_ennemi = (state: State) => {\n    console.log(state.joueur.pos.x +\" \"+ state.joueur.pos.y )\n    \n    for(let i=0; i<state.ennemis.length;i++){\n  \n      \n      if (state.joueur.pos.x+dimPersoX/2 > state.ennemis[i].x && state.joueur.pos.y+dimPersoY/2 >=state.ennemis[i].y \n        && state.joueur.pos.y - dimPersoY/2 <=(state.ennemis[i].y + 80)&& state.joueur.pos.x+dimPersoX/2 <(state.ennemis[i].x +10)){\n          state.joueur.HP--;\n          if(state.joueur.HP<0)\n            state.joueur.HP=0;\n\n      }\n      \n      if (state.joueur.pos.x-dimPersoX/2 < (state.ennemis[i].x +80 )&& state.joueur.pos.y+dimPersoY/2 >=state.ennemis[i].y \n        && state.joueur.pos.y - dimPersoY/2 <=(state.ennemis[i].y + 80) && state.joueur.pos.x-dimPersoX/2 > (state.ennemis[i].x +80-10) ){\n          state.joueur.HP--;\n          if(state.joueur.HP<0)\n            state.joueur.HP=0;\n      }\n      \n      if (state.joueur.pos.y-dimPersoY/2 < (state.ennemis[i].y+80) && state.joueur.pos.x+dimPersoX/2 >state.ennemis[i].x +10\n        && state.joueur.pos.x-dimPersoX/2<(state.ennemis[i].x + 80)&& state.joueur.pos.y+dimPersoY/2> (state.ennemis[i].y+80-40)){\n          state.joueur.HP--;\n          if(state.joueur.HP<0)\n            state.joueur.HP=0;\n      }\n      \n      \n      if (state.joueur.pos.y+dimPersoY/2 > state.ennemis[i].y && state.joueur.pos.x+dimPersoX/2 > state.ennemis[i].x +10\n        && state.joueur.pos.x-dimPersoX/2 < (state.ennemis[i].x + 80) && (state.joueur.pos.y-dimPersoY/2 <state.ennemis[i].y +40)){\n          state.joueur.HP--;\n          if(state.joueur.HP<0)\n            state.joueur.HP=0;\n      }\n    }\n\n}\n\nexport const collide_platEnnemis = (state: State) => {\n  for(let i=0; i<state.platforms.length;i++){\n    for(let j=0; j<state.ennemis.length;j++){\n      /*gauche*/\n      if (state.ennemis[j].x+80/2 > state.platforms[i].x && state.ennemis[j].y+80/2 >=state.platforms[i].y \n        && state.ennemis[j].y - 80/2 <=(state.platforms[i].y + state.platforms[i].largeur)&& state.ennemis[j].x+80/2 <(state.platforms[i].x +10)){\n          state.ennemis[j].x =state.platforms[i].x-80/2;\n          state.ennemis[j].speed = -state.ennemis[j].speed;\n      }\n      /*droite*/\n      if (state.ennemis[j].x-80/2 < (state.platforms[i].x +state.platforms[i].longueur )&& state.ennemis[j].y+80/2 >=state.platforms[i].y \n        && state.ennemis[j].y - 80/2 <=(state.platforms[i].y + state.platforms[i].largeur) && state.ennemis[j].x-80/2 > (state.platforms[i].x +state.platforms[i].longueur -10) ){\n          state.ennemis[j].x =state.platforms[i].x +state.platforms[i].longueur+80/2;\n          state.ennemis[j].speed = -state.ennemis[j].speed;\n      }\n      /*bas*/\n      if (state.ennemis[j].y-80/2 < (state.platforms[i].y+state.platforms[i].largeur) && state.ennemis[j].x+80/2 >state.platforms[i].x \n        && state.ennemis[j].x-80/2<(state.platforms[i].x + state.platforms[i].longueur)&& state.ennemis[j].y+80/2> (state.platforms[i].y+state.platforms[i].largeur-35)){\n          state.ennemis[j].y =state.platforms[i].y + state.platforms[i].largeur + 80/2;\n      }\n      \n      /*haut*/\n      if (state.ennemis[j].y+80/2 > state.platforms[i].y && state.ennemis[j].x+80/2 > state.platforms[i].x \n        && state.ennemis[j].x-80/2 < (state.platforms[i].x + state.platforms[i].longueur) && (state.ennemis[j].y-80/2 <state.platforms[i].y +35)){\n          state.ennemis[j].y =state.platforms[i].y-80/2;\n          state.joueur.velY=0;\n      }\n    }\n  }\n}\n\n\nexport const step = (state: State) => {\n  console.log(state.platforms)\n\n  currenty = state.joueur.pos.y\n\n  let newTime = Date.now();\n  let frameTime = newTime - currentTime;\n  currentTime = newTime;\n   \n\n\n  state.pos.map((p1, i, arr) => {\n    arr.slice(i + 1).map((p2) => {\n      if (collide(p1.coord, p2.coord)) {\n        if (!p1.invincible) {\n          p1.life--\n          p1.invincible = 20\n        }\n        if (!p2.invincible) {\n          p2.life--\n          p2.invincible = 20\n        }\n        collideBoing(p1.coord, p2.coord)\n      }\n    })\n  })\n\n  \n\n  //if (frameTime > 1000/60) {\n\n    //newTime = currentTime - (frameTime % (1000/60));\n\n    document.addEventListener('keydown', (event) => {\n      var name = event.key;\n  \n      if(name==='z'){\n        if (auSol) {\n          jump(state);\n          //state.joueur.velY = -7;\n        }\n        //state.joueur.pos = perso.moveUp(state.joueur,frameTime)\n      }\n      /*\n      if(name==='s'){\n        if (state.joueur.velY < state.joueur.speed) {\n          state.joueur.velY=7;\n        }\n         //state.joueur.pos=perso.moveDown(state.joueur,frameTime)\n      }\n      */\n      if(name==='q'){\n        if (state.joueur.velX > -state.joueur.speed) {\n          state.joueur.velX=-state.joueur.speed+3;\n          walkcycle = true;\n          if(rotate == true)\n            rotate = false\n        }\n         //state.joueur.pos= perso.moveLeft(state.joueur,frameTime)\n      }\n      if(name==='d'){\n        if (state.joueur.velX < state.joueur.speed) {\n          state.joueur.velX=state.joueur.speed-3;\n          walkcycle = true;\n          if(rotate == false)\n            rotate = true\n        }\n        // state.joueur.pos= perso.moveRight(state.joueur,frameTime)\n      }\n  \n    }, false);\n\n    document.addEventListener('keyup', (event) => {\n      var name = event.key;\n  \n      /*if(name==='z'){\n        if (state.joueur.velY > -state.joueur.speed) {\n          state.joueur.velY = 0;\n        }\n        //state.joueur.pos = perso.moveUp(state.joueur,frameTime)\n      }\n      if(name==='s'){\n        if (state.joueur.velY < state.joueur.speed) {\n          state.joueur.velY=0;\n        }\n         //state.joueur.pos=perso.moveDown(state.joueur,frameTime)\n      }*/\n      if(name==='q'){\n        if (state.joueur.velX > -state.joueur.speed) {\n          state.joueur.velX=0;\n          walkcycle = false\n        }\n         //state.joueur.pos= perso.moveLeft(state.joueur,frameTime)\n      }\n      if(name==='d'){\n        if (state.joueur.velX < state.joueur.speed) {\n          state.joueur.velX=0;\n          walkcycle = false\n        }\n        // state.joueur.pos= perso.moveRight(state.joueur,frameTime)\n      }\n  \n    }, false);\n\n\n  //}\n\n  //state.joueur.velY *= friction;\n  state.joueur.pos.y += state.joueur.velY;\n  //state.joueur.velX *= friction;\n  state.joueur.pos.x += state.joueur.velX;\n\n\n  \n  \n  state.joueur.velY += gravity;\n\n  if(state.joueur.pos.y > 625){\n    state.joueur.pos.y = 625\n  }\n\n  //deplacement Ennemis\n  for(let j=0; j<state.ennemis.length;j++){\n    //on verifie si l'ennemi doit changer de direction car il a parcouru sa distance\n    if(Math.abs(state.ennemis[j].dist_parcouru)>state.ennemis[j].dist_max){\n      state.ennemis[j].speed = -state.ennemis[j].speed;\n      state.ennemis[j].dist_parcouru\n      if(state.ennemis[j].rotate == true)\n        state.ennemis[j].rotate = false;\n      else\n        state.ennemis[j].rotate = true\n    }\n\n\n    state.ennemis[j].velX=state.ennemis[j].speed;\n    walkcycleEnnemis = true;\n    \n    \n    \n    state.ennemis[j].y += state.ennemis[j].velY;\n\n    state.ennemis[j].x += state.ennemis[j].velX;\n    //distance parcourue\n    state.ennemis[j].dist_parcouru+=state.ennemis[j].velX;\n\n    state.ennemis[j].velY += gravity;\n\n    if(state.ennemis[j].y > 612){\n      state.ennemis[j].y = 612\n    }\n\n\n\n    //on verifie si l'ennemi doit changer de direction car il a recnontré une plateforme\n    collide_platEnnemis(state);\n  }\n\n\n  collide_plat(state);\n  collide_ennemi(state);\n  if(currenty == previousy){\n    auSol = true\n  }\n  else{\n    auSol = false\n  }\n\n  previousy = currenty\n\n  //mouvement Camera\n  if(state.joueur.pos.x>700){\n    state.camera.x = state.joueur.pos.x\n    state.camera.y = state.joueur.pos.y\n  }\n  \n\n\n  \n\n  if (state.player.invincible) state.player.invincible--\n  state.pos.map((p1, i) => {\n    if (collide(p1.coord, state.player.coord)) {\n      collideBoing(p1.coord, state.player.coord)\n      if (!state.player.invincible) {\n        state.player.life--\n        state.player.invincible = 20\n      }\n      if (!p1.invincible) {\n        p1.life--\n        p1.invincible = 20\n      }\n    }\n  })\n  return {\n    ...state,\n    //player: iterate(state.joueur)(state.size)(state.player),\n    //pos: state.pos.map(iterate(state.joueur)(state.size)).filter((p) => p.life > 0),\n  }\n}\n\nexport const stepAuto = (state: State) => {\n\n  return {\n    ...state,\n    //player: iterate(state.joueur)(state.size)(state.player),\n    //pos: state.pos.map(iterate(state.joueur)(state.size)).filter((p) => p.life > 0),\n  }\n}\nexport const mouseMove =\n  (state: State) =>\n  (event: PointerEvent): State => {\n    return state\n  }\n\nexport const endOfGame = (state: State): boolean =>\n  state.player.life > 0 && state.pos.length > 0\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}